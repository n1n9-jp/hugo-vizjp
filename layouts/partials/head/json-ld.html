{{ if .IsPage }}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": {{ .Title | jsonify }},
    "image": [
        {{- $image := partialCached "helper/image" (dict "Context" . "Type" "opengraph") .RelPermalink "opengraph" -}}
        {{ if $image.exists }}
            {{ absURL $image.permalink | jsonify }}
        {{ end }}
    ],
    "datePublished": {{ .Date.Format "2006-01-02T15:04:05Z07:00" | jsonify }},
    "dateModified": {{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" | jsonify }},
    "author": {
        "@type": "Person",
        "name": {{ .Params.author | default .Site.Params.sidebar.author.name | default .Site.Title | jsonify }},
        "url": {{ .Site.BaseURL | jsonify }}
    },
    "publisher": {
        "@type": "Organization",
        "name": {{ .Site.Title | jsonify }},
        "logo": {
            "@type": "ImageObject",
            "url": {{ absURL .Site.Params.sidebar.avatar.src | jsonify }}
        }
    },
    "description": {{ .Description | default .Summary | jsonify }}
}
</script>
{{ end }}

<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": {{ .Site.BaseURL | jsonify }}
        }
        {{- $link := .Site.BaseURL -}}
        {{- range $index, $element := .Ancestors.Reverse -}}
            {{- $link = $element.Permalink -}}
            ,
            {
                "@type": "ListItem",
                "position": {{ add $index 2 }},
                "name": {{ $element.Title | jsonify }},
                "item": {{ $link | jsonify }}
            }
        {{- end -}}
        {{- if .IsPage -}}
            ,
            {
                "@type": "ListItem",
                "position": {{ add (len .Ancestors) 2 }},
                "name": {{ .Title | jsonify }},
                "item": {{ .Permalink | jsonify }}
            }
        {{- end -}}
    ]
}
</script>
