+++
author = "Yuichi Yazaki"
title = "コード・ダイアグラム（Chord Diagram）"
slug = "chord-diagram"
date = "2025-10-11"
categories = [
    "chart"
]
tags = [
    "",
]
image = "images/cover.png"
+++

コード・ダイアグラム（Chord Diagram）は、円形のレイアウト上で複数のカテゴリ間の関係やフローを可視化するチャートです。円周上に配置されたノード（カテゴリ）を線（コード）で結び、線の太さや色で関係の強さや方向性を示します。複雑な相互関係を一目で理解できるため、ネットワーク分析や貿易フロー、遺伝子発現の可視化などに広く利用されています。

<!--more-->

![](images/circos-global-flow-people-migration-01.png)

![](images/circos-sample-panel.png)

## 歴史的経緯

コード・ダイアグラムの概念は、1970年代の「サーキュラーネットワーク図（Circular Network Diagram）」に端を発します。

その後、Hans Roslingらによるデータ可視化の発展や、CIRCOS（Krzywinski, 2009）の登場によって、生命科学分野で急速に普及しました。CIRCOSは、ゲノム間の相互関係を円形に描くことで知られました。

後にD3.js（Mike Bostock, 2013）によってWeb上でも汎用的に実装されるようになりました。


## データ構造

コード・ダイアグラムは、主に**行列形式またはエッジリスト形式**のデータを入力とします。

| 構造 | 内容例 |
|------|--------|
| 行列形式 | 各行と列がノードを表し、セル値が関係の強さを示す（例：国A→国Bへの輸出額） |
| エッジリスト形式 | `source`, `target`, `value` の3列構成で、関係の方向と大きさを示す |

D3.jsやRAWGraphsなどのツールでは、双方向の関係を自動的に集約して描画します。

## 目的

主な目的は、複雑な相互関係を**直感的に理解**することです。特に、カテゴリ間の「総量の比較」と「相互のバランス」を同時に把握するのに適しています。国際貿易や移民フロー、組織内のコミュニケーション分析など、双方向の関係があるデータに効果的です。

## ユースケース

- **国際貿易データ**：国間の輸出入の流れを示す  
- **遺伝子間の相互作用**：ゲノム解析（CIRCOS）で用いられる  
- **顧客セグメント間の移動**：マーケティングや行動分析  
- **音楽アーティストのコラボ関係**：文化的ネットワーク可視化  

- **バイオインフォマティクス** では、遺伝子間の共発現や染色体間の関連を示すために使用される（例：ヒトゲノム間の相同性）。
- **経済学・貿易統計** では、国ごとの輸出入や産業間の資金・資源フローの可視化に用いられる。
- **ソーシャルネットワーク分析** では、人や組織間の関係性を円環的に整理でき、力学的レイアウトよりも対称性が強調される。
- **視覚的特徴** として、放射状・有機的な構造が美しく、アート的可読性とデータの網羅性を兼ね備えている。

## 特徴

- 円形レイアウトにより**対称性と美観**を保ちながら情報を表示できる  
- ノード間の関係を**線の太さと方向**で表現できる  
- 関係の総量を**扇形の大きさ**として示すことができる  
- しかし、多数のノードを表示すると**線の交差が増え、可読性が低下**する欠点もあります  

## チャートの見方

1. **円周上のセグメント**：各ノード（カテゴリ）を表す  
2. **コード（弦）**：関係やフローを表す線。太いほど強い関係を意味する  
3. **方向性**：場合によってはグラデーションや矢印で方向を示す  
4. **色**：カテゴリやグループを識別する補助的要素  

![alt text](images/circos-global-flow-people-migration-02-legend.png)

| 要素 | 表しているもの | 解釈のポイント |
|------|----------------|----------------|
| 円周上のセグメント（Arc） | 各カテゴリ・ノード | 対象（国、産業、個体など）を円形に並べる。長さが値の大きさを示す場合もある。 |
| 弧（Chord） | ノード間の関係またはフロー | 2つのノード間の関係や流入・流出の量を表す。弧の太さが数量を示す。 |
| 色（Color） | グループや方向性 | 同系色でグループを示したり、グラデーションで方向（A→B）を表す。 |
| 弧の向き | 関係の方向性 | 有向データの場合、片側が起点、もう片側が終点となる。 |
| 交差の有無 | 相互関係の複雑さ | 弧が多く交差するほど関係構造が複雑であることを示す。 |


## デザイン上の注意点

- ノード数を**10〜20程度に制限**すると可読性が保てる  
- **色の選択**はグループの意味づけと区別に直結するため慎重に行う  
- **対称性と間隔**を均等に保つことで視覚的バランスを高める  
- 相互関係の強弱を伝えるために、**線幅や透明度**を活用する  

## 応用例

- **世界貿易フローの可視化**（UN Comtrade）  
- **ヒトゲノム相互作用マップ**（CIRCOS）  
- **チーム間のコミュニケーション分析**（社内Slackやメールデータ）  
- **国際移民データ**（世界銀行、OECD）  

## 代替例

| チャートタイプ | 比較ポイント |
|----------------|--------------|
| サンキー・ダイアグラム | フローの方向性と段階構造を強調できる |
| ネットワーク・グラフ | ノード間の個別関係を詳細に表現できる |
| マトリクス・チャート | 定量的関係をより正確に比較できる |


## まとめ

コード・ダイアグラムは、関係性データを視覚的に表現する強力な手法です。その美しい構造と相互性の表現力により、複雑なデータの背後にあるパターンを直感的に理解できます。

ただし、ノード数やリンクが多いと可読性が低下するため **グルーピング・色分け・フィルタリング** の工夫が重要です。

## 参考・出典

- [CIRCOS: Information aesthetics for comparative genomics (Martin Krzywinski, 2009)](http://circos.ca/)
